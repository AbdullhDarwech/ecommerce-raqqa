(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[3185],{4946:function(e,t,r){Promise.resolve().then(r.bind(r,5313)),Promise.resolve().then(r.bind(r,1507)),Promise.resolve().then(r.bind(r,5388)),Promise.resolve().then(r.bind(r,5220)),Promise.resolve().then(r.bind(r,2901)),Promise.resolve().then(r.t.bind(r,2853,23)),Promise.resolve().then(r.bind(r,3447))},5313:function(e,t,r){"use strict";r.r(t),r.d(t,{default:function(){return CartDrawer}});var s=r(7437),a=r(2901),l=r(3447),i=r(4033),n=r(8177),o=r(6307),c=r(6712),d=r(2549),x=r(5367),h=r(4891),m=r(9883),u=r(1097),g=r(6691),f=r.n(g),p=r(1396),b=r.n(p);let j=n.E.div;function CartDrawer(){let{isCartOpen:e,closeCart:t,cartItems:r,cartTotal:n,removeFromCart:g,updateQuantity:p}=(0,a.useCart)(),{user:v}=(0,l.useAuth)(),y=(0,i.useRouter)();return(0,s.jsx)(o.M,{children:e&&(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)(j,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},onClick:t,className:"fixed inset-0 bg-black/40 backdrop-blur-sm z-[100]"}),(0,s.jsxs)(j,{initial:{x:"-100%"},animate:{x:0},exit:{x:"-100%"},transition:{type:"spring",damping:25,stiffness:200},className:"fixed top-0 left-0 bottom-0 w-full sm:w-[400px] bg-white z-[101] shadow-2xl flex flex-col",children:[(0,s.jsxs)("div",{className:"p-5 border-b flex items-center justify-between bg-gray-50",children:[(0,s.jsxs)("div",{className:"flex items-center gap-2",children:[(0,s.jsx)(c.Z,{className:"text-emerald-600"}),(0,s.jsx)("h2",{className:"text-lg font-bold",children:"سلة المشتريات"}),(0,s.jsxs)("span",{className:"bg-emerald-100 text-emerald-700 text-xs font-bold px-2 py-1 rounded-full",children:[r.length," منتجات"]})]}),(0,s.jsx)("button",{onClick:t,className:"p-2 hover:bg-gray-200 rounded-full transition-colors",children:(0,s.jsx)(d.Z,{size:20})})]}),(0,s.jsx)("div",{className:"flex-1 overflow-y-auto p-5 space-y-4",children:r.length>0?r.map(e=>{var t;let r="rental"===e.orderType?e.product.priceRental:e.product.pricePurchase;return(0,s.jsxs)("div",{className:"flex gap-3 border p-3 rounded-xl hover:shadow-md transition-shadow relative bg-white",children:[(0,s.jsx)("div",{className:"relative w-20 h-20 bg-gray-100 rounded-lg overflow-hidden shrink-0 border border-gray-100",children:(0,s.jsx)(f(),{src:(null===(t=e.product.images)||void 0===t?void 0:t[0])||"/placeholder.png",alt:e.product.name,fill:!0,className:"object-cover"})}),(0,s.jsxs)("div",{className:"flex-1 flex flex-col justify-between",children:[(0,s.jsxs)("div",{children:[(0,s.jsxs)("div",{className:"flex justify-between items-start",children:[(0,s.jsx)("h3",{className:"font-semibold text-gray-800 line-clamp-1 text-sm",children:e.product.name}),(0,s.jsx)("button",{onClick:()=>g(e.product._id,e.orderType),className:"text-gray-400 hover:text-red-500 transition-colors p-1",children:(0,s.jsx)(x.Z,{size:16})})]}),(0,s.jsxs)("div",{className:"flex items-center gap-2 mt-1",children:[(0,s.jsxs)("p",{className:"text-emerald-600 font-bold text-sm",children:["$",r]}),"rental"===e.orderType&&(0,s.jsx)("span",{className:"text-[10px] bg-blue-50 text-blue-600 px-1.5 py-0.5 rounded",children:"تأجير"})]})]}),(0,s.jsx)("div",{className:"flex items-center justify-between mt-2",children:(0,s.jsxs)("div",{className:"flex items-center gap-2 border rounded-lg px-1 bg-gray-50 h-8",children:[(0,s.jsx)("button",{onClick:()=>p(e.product._id,e.orderType,e.quantity-1),className:"w-6 h-full flex items-center justify-center text-gray-500 hover:text-emerald-600",children:(0,s.jsx)(h.Z,{size:14})}),(0,s.jsx)("span",{className:"text-xs font-bold w-4 text-center",children:e.quantity}),(0,s.jsx)("button",{onClick:()=>p(e.product._id,e.orderType,e.quantity+1),className:"w-6 h-full flex items-center justify-center text-gray-500 hover:text-emerald-600",children:(0,s.jsx)(m.Z,{size:14})})]})})]})]},"".concat(e.product._id,"-").concat(e.orderType))}):(0,s.jsxs)("div",{className:"h-full flex flex-col items-center justify-center text-center space-y-4",children:[(0,s.jsx)("div",{className:"w-20 h-20 bg-gray-100 rounded-full flex items-center justify-center",children:(0,s.jsx)(c.Z,{size:40,className:"text-gray-300"})}),(0,s.jsx)("p",{className:"text-gray-500",children:"سلتك فارغة حالياً"}),(0,s.jsx)("button",{onClick:t,className:"text-emerald-600 font-bold hover:underline",children:"تصفح المنتجات"})]})}),r.length>0&&(0,s.jsxs)("div",{className:"p-5 border-t bg-gray-50 safe-area-bottom pb-8 sm:pb-5",children:[(0,s.jsxs)("div",{className:"flex justify-between items-center mb-4 text-lg font-bold",children:[(0,s.jsx)("span",{children:"المجموع:"}),(0,s.jsxs)("span",{className:"text-emerald-600",children:["$",n.toLocaleString()]})]}),(0,s.jsxs)("div",{className:"space-y-3",children:[(0,s.jsx)("button",{onClick:()=>{t(),v?y.push("/checkout"):y.push("/login?redirect=/checkout")},className:"block w-full text-white text-center py-3.5 rounded-xl font-bold shadow-lg transition-all flex items-center justify-center gap-2 ".concat(v?"bg-emerald-600 hover:bg-emerald-700 shadow-emerald-500/20":"bg-gray-800 hover:bg-gray-900 shadow-gray-500/20"),children:v?"إتمام الطلب":(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)(u.Z,{size:18})," سجل دخولك للإتمام"]})}),(0,s.jsx)(b(),{href:"/cart",onClick:t,className:"block w-full bg-white border border-gray-200 hover:bg-gray-50 text-gray-700 text-center py-3.5 rounded-xl font-bold transition-all",children:"عرض السلة الكاملة"})]})]})]})]})})}},1507:function(e,t,r){"use strict";r.r(t),r.d(t,{default:function(){return Container}});var s=r(7437);function Container(e){let{children:t,className:r=""}=e;return(0,s.jsx)("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 ".concat(r),children:t})}r(2265)},5388:function(e,t,r){"use strict";r.r(t),r.d(t,{default:function(){return Footer}});var s=r(7437),a=r(1396),l=r.n(a),i=r(1798),n=r(6539),o=r(3039),c=r(6142),d=r(2741),x=r(1295),h=r(7810);function Footer(){return(0,s.jsx)("footer",{className:"bg-gray-900 text-gray-300 pt-16 pb-8 border-t border-gray-800",children:(0,s.jsxs)("div",{className:"container mx-auto px-4",children:[(0,s.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-12 mb-12",children:[(0,s.jsxs)("div",{children:[(0,s.jsxs)(l(),{href:"/",className:"flex items-center gap-2 mb-6",children:[(0,s.jsx)("div",{className:"w-10 h-10 bg-emerald-600 rounded-xl flex items-center justify-center text-white font-bold text-xl",children:"F"}),(0,s.jsx)("span",{className:"font-bold text-2xl text-white",children:"Furato"})]}),(0,s.jsx)("p",{className:"text-gray-400 leading-relaxed mb-6",children:"سوق الرقة الإلكتروني الأول. نجمع بين الأصالة والتطور لتقديم أفضل المنتجات المحلية والعالمية بأسعار تنافسية وخدمة توصيل سريعة."}),(0,s.jsxs)("div",{className:"flex gap-4",children:[(0,s.jsx)(SocialLink,{href:"#",icon:(0,s.jsx)(i.Z,{size:20})}),(0,s.jsx)(SocialLink,{href:"#",icon:(0,s.jsx)(n.Z,{size:20})}),(0,s.jsx)(SocialLink,{href:"#",icon:(0,s.jsx)(o.Z,{size:20})})]})]}),(0,s.jsxs)("div",{children:[(0,s.jsx)("h3",{className:"text-white font-bold text-lg mb-6",children:"روابط سريعة"}),(0,s.jsxs)("ul",{className:"space-y-4",children:[(0,s.jsx)(FooterLink,{href:"/products",label:"جميع المنتجات"}),(0,s.jsx)(FooterLink,{href:"/categories",label:"الفئات"}),(0,s.jsx)(FooterLink,{href:"/offers",label:"العروض الخاصة"}),(0,s.jsx)(FooterLink,{href:"/contact",label:"اتصل بنا"})]})]}),(0,s.jsxs)("div",{children:[(0,s.jsx)("h3",{className:"text-white font-bold text-lg mb-6",children:"خدمة العملاء"}),(0,s.jsxs)("ul",{className:"space-y-4",children:[(0,s.jsx)(FooterLink,{href:"/profile",label:"حسابي"}),(0,s.jsx)(FooterLink,{href:"/cart",label:"سلة المشتريات"}),(0,s.jsx)(FooterLink,{href:"/wishlist",label:"المفضلة"}),(0,s.jsx)(FooterLink,{href:"/privacy",label:"سياسة الخصوصية"}),(0,s.jsx)(FooterLink,{href:"/terms",label:"الشروط والأحكام"})]})]}),(0,s.jsxs)("div",{children:[(0,s.jsx)("h3",{className:"text-white font-bold text-lg mb-6",children:"تواصل معنا"}),(0,s.jsxs)("ul",{className:"space-y-4",children:[(0,s.jsxs)("li",{className:"flex items-start gap-3",children:[(0,s.jsx)(c.Z,{className:"text-emerald-500 shrink-0 mt-1",size:20}),(0,s.jsx)("span",{children:"سوريا، الرقة، شارع التل"})]}),(0,s.jsxs)("li",{className:"flex items-center gap-3",children:[(0,s.jsx)(d.Z,{className:"text-emerald-500 shrink-0",size:20}),(0,s.jsx)("span",{dir:"ltr",children:"+963 930 904 315"})]}),(0,s.jsxs)("li",{className:"flex items-center gap-3",children:[(0,s.jsx)(x.Z,{className:"text-emerald-500 shrink-0",size:20}),(0,s.jsx)("span",{children:"info@Furato.com"})]})]})]})]}),(0,s.jsxs)("div",{className:"border-t border-gray-800 pt-8 mt-8 flex flex-col md:flex-row items-center justify-between gap-4 text-sm text-gray-500",children:[(0,s.jsxs)("p",{children:["\xa9 ",new Date().getFullYear()," سوق الرقة (Furato). جميع الحقوق محفوظة."]}),(0,s.jsxs)("div",{className:"flex items-center gap-1",children:[(0,s.jsx)("span",{children:"صنع بكل"}),(0,s.jsx)(h.Z,{size:14,className:"text-rose-500 fill-current"}),(0,s.jsx)("span",{children:"لأهل الرقة"})]})]})]})})}function SocialLink(e){let{href:t,icon:r}=e;return(0,s.jsx)("a",{href:t,className:"w-10 h-10 bg-gray-800 rounded-full flex items-center justify-center hover:bg-emerald-600 hover:text-white transition-all duration-300",children:r})}function FooterLink(e){let{href:t,label:r}=e;return(0,s.jsx)("li",{children:(0,s.jsx)(l(),{href:t,className:"text-gray-400 hover:text-emerald-500 transition-colors",children:r})})}},5220:function(e,t,r){"use strict";r.r(t),r.d(t,{default:function(){return Header}});var s=r(7437),a=r(2265),l=r(1396),i=r.n(l),n=r(4033),o=r(8177),c=r(6307),d=r(3523),x=r(1827),h=r(2549),m=r(6264),u=r(7810),g=r(3505),f=r(7972),p=r(6538),b=r(8956),j=r(5883),v=r(8004),y=r(268),N=r(8291),w=r(2741),k=r(6081),C=r(3447),z=r(6691),S=r.n(z),Z=r(2901);let A=o.E.div,F=o.E.aside;function Header(){var e;let{user:t,logout:r}=(0,C.useAuth)(),l=(0,n.useRouter)(),[o,z]=(0,a.useState)([]),[L,P]=(0,a.useState)(!1),{cartCount:_}=(0,Z.useCart)(),[E,I]=(0,a.useState)(!1),[T,R]=(0,a.useState)(!1),[q,M]=(0,a.useState)(!1),[O,B]=(0,a.useState)(!1),[J,U]=(0,a.useState)(""),[D,H]=(0,a.useState)([]),[$,W]=(0,a.useState)(!1),Y=(0,a.useRef)(null),Q=(0,a.useRef)(null),V=(null==t?void 0:null===(e=t.favorites)||void 0===e?void 0:e.length)||0,G=(0,n.usePathname)();(0,a.useEffect)(()=>{let handleScroll=()=>P(window.scrollY>20);return window.addEventListener("scroll",handleScroll),()=>window.removeEventListener("scroll",handleScroll)},[]),(0,a.useEffect)(()=>{let fetchCategories=async()=>{try{let e=await k.ZP.get("/categories");z(Array.isArray(e.data)?e.data:[])}catch(e){console.error("Failed to load categories",e)}};fetchCategories()},[]),(0,a.useEffect)(()=>{I(!1),B(!1),R(!1),M(!1),U(""),H([])},[G]),(0,a.useEffect)(()=>{let handleClickOutside=e=>{Q.current&&!Q.current.contains(e.target)&&window.innerWidth>=1024&&(H([]),R(!1))};return document.addEventListener("mousedown",handleClickOutside),()=>document.removeEventListener("mousedown",handleClickOutside)},[]);let handleLogout=()=>{r(),B(!1),l.push("/login")},handleSearchChange=e=>{let t=e.target.value;U(t),Y.current&&clearTimeout(Y.current),t.trim().length>1?(W(!0),Y.current=setTimeout(async()=>{try{let e=await k.ZP.get("/products?search=".concat(t,"&limit=5"));H(e.data.data||[])}catch(e){console.error("Search error",e)}finally{W(!1)}},400)):(H([]),W(!1))},handleSearchSubmit=e=>{e.preventDefault(),J.trim()&&(l.push("/products?search=".concat(J)),R(!1),M(!1),H([]))};return(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)("header",{className:"fixed top-0 inset-x-0 z-50 transition-all duration-300 border-b ".concat(L?"bg-white/95 backdrop-blur-md shadow-sm border-gray-200 py-3":"bg-white border-transparent py-4"),children:(0,s.jsxs)("div",{className:"container mx-auto px-4",children:[(0,s.jsxs)("div",{className:"flex items-center justify-between gap-4",children:[(0,s.jsxs)(i(),{href:"/",className:"flex items-center gap-2 group relative shrink-0 z-50",children:[(0,s.jsx)("div",{className:"w-9 h-9 md:w-10 md:h-10 bg-gradient-to-br from-emerald-500 to-green-600 rounded-xl flex items-center justify-center text-white font-bold text-xl shadow-lg group-hover:shadow-emerald-500/30 transition-all",children:"S"}),(0,s.jsx)("span",{className:"font-bold text-xl md:text-2xl tracking-tight text-gray-900 group-hover:text-emerald-600 transition-colors",children:"Furato"})]}),(0,s.jsxs)("nav",{className:"hidden lg:flex items-center gap-6 xl:gap-8",children:[(0,s.jsx)(NavLink,{href:"/",label:"الرئيسية",active:"/"===G}),(0,s.jsx)(NavLink,{href:"/products",label:"المنتجات",active:"/products"===G}),(0,s.jsx)(NavLink,{href:"/stores",label:"المتاجر",active:"/stores"===G}),(0,s.jsxs)("div",{className:"relative group z-50",children:[(0,s.jsxs)("button",{className:"flex items-center gap-1 font-medium text-gray-600 hover:text-emerald-600 transition-colors py-2",children:["الفئات ",(0,s.jsx)(d.Z,{size:16})]}),(0,s.jsx)("div",{className:"absolute top-full right-0 w-60 pt-4 opacity-0 invisible group-hover:opacity-100 group-hover:visible transition-all duration-200 transform translate-y-2 group-hover:translate-y-0",children:(0,s.jsxs)("div",{className:"bg-white rounded-2xl shadow-xl border border-gray-100 overflow-hidden p-2",children:[(0,s.jsx)("div",{className:"max-h-64 overflow-y-auto custom-scrollbar",children:o.length>0?o.map(e=>(0,s.jsx)(i(),{href:"/products?category=".concat(e.name),className:"block px-4 py-2.5 rounded-xl text-sm text-gray-700 hover:bg-emerald-50 hover:text-emerald-700 transition-colors",children:e.name},e._id)):(0,s.jsx)("span",{className:"block px-4 py-2 text-sm text-gray-400",children:"جاري التحميل..."})}),(0,s.jsx)("div",{className:"h-px bg-gray-100 my-1"}),(0,s.jsx)(i(),{href:"/categories",className:"block px-4 py-2 text-xs font-bold text-emerald-600 hover:text-emerald-700 text-center",children:"عرض جميع الفئات"})]})})]}),(0,s.jsx)(NavLink,{href:"/contact",label:"اتصل بنا",active:"/contact"===G})]}),(0,s.jsxs)("div",{ref:Q,className:"hidden lg:flex items-center relative transition-all duration-300 ".concat(T?"w-80":"w-10"),children:[(0,s.jsx)("button",{onClick:()=>{R(!T),T||setTimeout(()=>{var e;return null===(e=document.getElementById("desktop-search-input"))||void 0===e?void 0:e.focus()},100)},className:"absolute left-0 z-10 p-2 text-gray-500 hover:text-emerald-600 ".concat(T?"pointer-events-none":""),children:(0,s.jsx)(x.Z,{size:20})}),(0,s.jsx)("form",{onSubmit:handleSearchSubmit,className:"w-full",children:(0,s.jsx)("input",{id:"desktop-search-input",type:"text",placeholder:"ابحث عن منتج...",value:J,onChange:handleSearchChange,className:"w-full bg-gray-100 rounded-full py-2.5 px-4 pl-10 text-sm focus:outline-none focus:ring-2 focus:ring-emerald-500/50 transition-all ".concat(T?"opacity-100 visible":"opacity-0 invisible w-0")})}),T&&(0,s.jsx)("button",{onClick:()=>{R(!1),U(""),H([])},className:"absolute right-3 text-gray-400 hover:text-red-500",children:(0,s.jsx)(h.Z,{size:14})}),(0,s.jsx)(c.M,{children:T&&(D.length>0||$)&&(0,s.jsx)(A,{initial:{opacity:0,y:10},animate:{opacity:1,y:0},exit:{opacity:0,y:10},className:"absolute top-full left-0 right-0 mt-3 bg-white rounded-2xl shadow-xl border border-gray-100 overflow-hidden z-[60]",children:$?(0,s.jsx)("div",{className:"p-4 flex justify-center text-gray-400",children:(0,s.jsx)(m.Z,{className:"animate-spin",size:20})}):(0,s.jsxs)("div",{className:"max-h-80 overflow-y-auto",children:[D.map(e=>{var t;return(0,s.jsxs)(i(),{href:"/products/".concat(e._id),className:"flex items-center gap-3 p-3 hover:bg-gray-50 border-b border-gray-50 last:border-0 transition-colors",children:[(0,s.jsx)("div",{className:"w-10 h-10 bg-gray-100 rounded-lg overflow-hidden shrink-0 relative",children:(null===(t=e.images)||void 0===t?void 0:t[0])&&(0,s.jsx)(S(),{src:e.images[0],alt:e.name,fill:!0,className:"object-cover"})}),(0,s.jsxs)("div",{className:"flex-1 min-w-0",children:[(0,s.jsx)("p",{className:"text-sm font-bold text-gray-900 truncate",children:e.name}),(0,s.jsxs)("p",{className:"text-xs text-emerald-600 font-bold",children:["$",e.pricePurchase]})]})]},e._id)}),(0,s.jsx)(i(),{href:"/products?search=".concat(J),className:"block p-3 text-center text-xs font-bold text-emerald-600 hover:bg-emerald-50",children:"عرض جميع النتائج"})]})})})]}),(0,s.jsxs)("div",{className:"flex items-center gap-2 md:gap-3",children:[(0,s.jsx)("button",{className:"lg:hidden p-2 text-gray-600 hover:bg-gray-100 rounded-full",onClick:()=>{M(!q),I(!1)},children:q?(0,s.jsx)(h.Z,{size:22}):(0,s.jsx)(x.Z,{size:22})}),(0,s.jsxs)(i(),{href:"/wishlist",className:"relative p-2 text-gray-600 hover:text-rose-500 hover:bg-rose-50 rounded-full transition-all hidden sm:flex",children:[(0,s.jsx)(u.Z,{size:22}),V>0&&(0,s.jsx)("span",{className:"absolute top-1 right-1 w-4 h-4 bg-rose-500 text-white text-[10px] font-bold flex items-center justify-center rounded-full border-2 border-white",children:V})]}),(0,s.jsxs)(i(),{href:"/cart",className:"relative p-2.5 text-slate-700 hover:text-emerald-600 hover:bg-emerald-50 rounded-full transition-all",children:[(0,s.jsx)(g.Z,{size:22,strokeWidth:2.2}),_>0&&(0,s.jsx)("span",{className:"absolute top-1 right-1 w-5 h-5 bg-emerald-600 text-white text-[10px] font-black flex items-center justify-center rounded-full border-2 border-white animate-in zoom-in duration-300",children:_})]}),(0,s.jsx)("div",{className:"hidden sm:flex items-center relative border-r border-gray-200 mr-2 pr-4",children:t?(0,s.jsxs)("div",{className:"relative",children:[(0,s.jsxs)("button",{onClick:()=>B(!O),className:"flex items-center gap-2 text-sm font-semibold text-gray-700 hover:text-emerald-600 transition-colors",children:[(0,s.jsx)("div",{className:"w-8 h-8 bg-emerald-100 rounded-full flex items-center justify-center text-emerald-600",children:(0,s.jsx)(f.Z,{size:18})}),(0,s.jsx)("span",{className:"max-w-[100px] truncate",children:t.name}),(0,s.jsx)(d.Z,{size:14})]}),(0,s.jsx)(c.M,{children:O&&(0,s.jsxs)(A,{initial:{opacity:0,y:10},animate:{opacity:1,y:0},exit:{opacity:0,y:10},className:"absolute top-full left-0 mt-2 w-52 bg-white rounded-xl shadow-xl border border-gray-100 overflow-hidden py-1 z-50",children:[(0,s.jsxs)("div",{className:"px-4 py-3 border-b border-gray-50 bg-gray-50/50",children:[(0,s.jsx)("p",{className:"text-xs text-gray-500",children:"مسجل كـ"}),(0,s.jsx)("p",{className:"text-sm font-bold text-gray-800 truncate",children:t.email})]}),(0,s.jsxs)(i(),{href:"/profile",className:"flex items-center gap-2 px-4 py-2.5 text-sm text-gray-700 hover:bg-gray-50",children:[(0,s.jsx)(p.Z,{size:16})," ملفي الشخصي"]}),"admin"===t.role&&(0,s.jsxs)(i(),{href:"/admin",className:"flex items-center gap-2 px-4 py-2.5 text-sm text-gray-700 hover:bg-gray-50",children:[(0,s.jsx)(b.Z,{size:16})," لوحة الإدارة"]}),(0,s.jsx)("div",{className:"h-px bg-gray-100 my-1"}),(0,s.jsxs)("button",{onClick:handleLogout,className:"w-full flex items-center gap-2 px-4 py-2.5 text-sm text-red-600 hover:bg-red-50 text-right",children:[(0,s.jsx)(j.Z,{size:16})," تسجيل خروج"]})]})})]}):(0,s.jsxs)(i(),{href:"/login",className:"flex items-center gap-2 px-4 py-2 bg-gray-900 text-white rounded-lg hover:bg-gray-800 transition-colors text-sm font-bold shadow-lg shadow-gray-200",children:[(0,s.jsx)(f.Z,{size:16}),(0,s.jsx)("span",{children:"دخول"})]})}),(0,s.jsx)("button",{className:"lg:hidden p-2 text-gray-800 bg-gray-100 rounded-lg ml-2 hover:bg-gray-200 transition-colors",onClick:()=>{I(!0),M(!1)},children:(0,s.jsx)(v.Z,{size:24})})]})]}),(0,s.jsx)(c.M,{children:q&&(0,s.jsx)(A,{initial:{height:0,opacity:0},animate:{height:"auto",opacity:1},exit:{height:0,opacity:0},className:"lg:hidden overflow-hidden border-t border-gray-100 mt-3",children:(0,s.jsxs)("div",{className:"py-2",children:[(0,s.jsxs)("form",{onSubmit:handleSearchSubmit,className:"relative",children:[(0,s.jsx)("input",{type:"text",placeholder:"ابحث عن منتج...",value:J,onChange:handleSearchChange,autoFocus:!0,className:"w-full bg-gray-50 border border-gray-200 rounded-xl py-3 px-4 pl-10 focus:outline-none focus:border-emerald-500 focus:ring-1 focus:ring-emerald-500"}),(0,s.jsx)(x.Z,{className:"absolute left-3 top-3.5 text-gray-400",size:18}),$&&(0,s.jsx)(m.Z,{className:"absolute right-10 top-3.5 text-emerald-500 animate-spin",size:18})]}),D.length>0&&(0,s.jsxs)("div",{className:"mt-2 bg-white rounded-xl shadow-lg border border-gray-100 overflow-hidden max-h-60 overflow-y-auto",children:[D.map(e=>{var t;return(0,s.jsxs)(i(),{href:"/products/".concat(e._id),onClick:()=>M(!1),className:"flex items-center gap-3 p-3 hover:bg-gray-50 border-b border-gray-50 last:border-0",children:[(0,s.jsx)("div",{className:"w-10 h-10 bg-gray-100 rounded-lg overflow-hidden shrink-0 relative",children:(null===(t=e.images)||void 0===t?void 0:t[0])&&(0,s.jsx)(S(),{src:e.images[0],alt:e.name,fill:!0,className:"object-cover"})}),(0,s.jsxs)("div",{className:"flex-1 min-w-0",children:[(0,s.jsx)("p",{className:"text-sm font-bold text-gray-900 truncate",children:e.name}),(0,s.jsxs)("p",{className:"text-xs text-emerald-600 font-bold",children:["$",e.pricePurchase]})]})]},e._id)}),(0,s.jsx)(i(),{href:"/products?search=".concat(J),onClick:()=>M(!1),className:"block p-3 text-center text-xs font-bold text-emerald-600 bg-gray-50",children:"عرض كل النتائج"})]})]})})})]})}),(0,s.jsx)("div",{className:"".concat(L?"h-16":"h-20 md:h-24"," transition-all duration-300")}),(0,s.jsx)(c.M,{children:E&&(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)(A,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},onClick:()=>I(!1),className:"fixed inset-0 bg-black/40 z-[60] backdrop-blur-sm lg:hidden"}),(0,s.jsxs)(F,{initial:{x:"100%"},animate:{x:0},exit:{x:"100%"},transition:{type:"spring",damping:25,stiffness:200},className:"fixed top-0 right-0 bottom-0 w-[85%] sm:w-80 bg-white z-[70] shadow-2xl lg:hidden overflow-y-auto flex flex-col",children:[(0,s.jsxs)("div",{className:"p-5 flex-1",children:[(0,s.jsxs)("div",{className:"flex items-center justify-between mb-8",children:[(0,s.jsx)("span",{className:"font-bold text-2xl text-gray-900",children:"القائمة"}),(0,s.jsx)("button",{onClick:()=>I(!1),className:"p-2 bg-gray-100 rounded-full hover:bg-red-50 hover:text-red-500 transition-colors",children:(0,s.jsx)(h.Z,{size:20})})]}),(0,s.jsxs)("nav",{className:"space-y-2",children:[(0,s.jsx)(MobileNavLink,{href:"/",icon:(0,s.jsx)(b.Z,{size:20}),label:"الرئيسية",active:"/"===G}),(0,s.jsx)(MobileNavLink,{href:"/products",icon:(0,s.jsx)(g.Z,{size:20}),label:"المتجر",active:"/products"===G}),(0,s.jsx)(MobileNavLink,{href:"/stores",icon:(0,s.jsx)(y.Z,{size:20}),label:"المتاجر",active:"/stores"===G}),(0,s.jsxs)("div",{className:"py-4",children:[(0,s.jsx)("p",{className:"text-xs font-bold text-gray-400 uppercase tracking-wider mb-3 px-4",children:"الفئات"}),(0,s.jsx)("div",{className:"space-y-1 max-h-48 overflow-y-auto custom-scrollbar",children:o.map(e=>(0,s.jsxs)(i(),{href:"/products?category=".concat(e.name),onClick:()=>I(!1),className:"flex items-center justify-between px-4 py-2.5 text-gray-600 hover:bg-gray-50 hover:text-emerald-600 rounded-lg transition-colors text-sm",children:[e.name,(0,s.jsx)(N.Z,{size:14,className:"opacity-0 group-hover:opacity-100"})]},e._id))})]}),(0,s.jsx)("div",{className:"h-px bg-gray-100 my-4"}),(0,s.jsx)(MobileNavLink,{href:"/contact",icon:(0,s.jsx)(w.Z,{size:20}),label:"اتصل بنا",active:"/contact"===G})]})]}),(0,s.jsx)("div",{className:"p-4 bg-gray-50 border-t border-gray-100",children:t?(0,s.jsxs)(s.Fragment,{children:[(0,s.jsxs)("div",{className:"flex items-center gap-3 mb-4",children:[(0,s.jsx)("div",{className:"w-10 h-10 bg-emerald-100 rounded-full flex items-center justify-center text-emerald-600 shrink-0",children:(0,s.jsx)(f.Z,{size:20})}),(0,s.jsxs)("div",{className:"overflow-hidden",children:[(0,s.jsx)("p",{className:"font-bold text-gray-900 truncate",children:t.name}),(0,s.jsx)("p",{className:"text-xs text-gray-500 truncate",children:t.email})]})]}),(0,s.jsxs)("div",{className:"grid grid-cols-2 gap-2",children:[(0,s.jsxs)(i(),{href:"/profile",onClick:()=>I(!1),className:"flex items-center justify-center gap-2 py-2 px-3 text-sm font-bold text-emerald-700 bg-emerald-100 hover:bg-emerald-200 rounded-xl transition-colors",children:[(0,s.jsx)(p.Z,{size:18})," ملفي"]}),"admin"===t.role&&(0,s.jsxs)(i(),{href:"/admin",onClick:()=>I(!1),className:"flex items-center justify-center gap-2 py-2 px-3 text-sm font-bold text-purple-700 bg-purple-100 hover:bg-purple-200 rounded-xl transition-colors",children:[(0,s.jsx)(b.Z,{size:18})," الإدارة"]})]}),(0,s.jsxs)("button",{onClick:handleLogout,className:"w-full mt-2 py-2.5 bg-white border border-red-100 text-red-500 hover:bg-red-50 rounded-xl font-bold text-sm flex items-center justify-center gap-2 transition-colors shadow-sm",children:[(0,s.jsx)(j.Z,{size:16})," تسجيل خروج"]})]}):(0,s.jsxs)(s.Fragment,{children:[(0,s.jsxs)("div",{className:"text-center mb-4",children:[(0,s.jsx)("p",{className:"font-bold text-gray-900",children:"أهلاً بك زائري الكريم"}),(0,s.jsx)("p",{className:"text-sm text-gray-500",children:"سجل دخولك لاستكمال التسوق"})]}),(0,s.jsx)(i(),{href:"/login",onClick:()=>I(!1),className:"block w-full py-3 bg-emerald-600 text-white hover:bg-emerald-700 rounded-xl font-bold text-center text-sm shadow-lg shadow-emerald-500/20 transition-all",children:"تسجيل الدخول"}),(0,s.jsx)(i(),{href:"/register",onClick:()=>I(!1),className:"block w-full py-3 mt-2 bg-white border border-emerald-200 text-emerald-600 hover:bg-emerald-50 rounded-xl font-bold text-center text-sm transition-all",children:"حساب جديد"})]})})]})]})})]})}function NavLink(e){let{href:t,label:r,active:a}=e;return(0,s.jsxs)(i(),{href:t,className:"relative font-medium transition-colors ".concat(a?"text-emerald-600":"text-gray-600 hover:text-emerald-600"),children:[r,a&&(0,s.jsx)(A,{layoutId:"underline",className:"absolute -bottom-1 right-0 w-full h-0.5 bg-emerald-600 rounded-full"})]})}function MobileNavLink(e){let{href:t,icon:r,label:a,active:l}=e;return(0,s.jsxs)(i(),{href:t,className:"flex items-center gap-3 px-4 py-3 rounded-xl transition-all ".concat(l?"bg-emerald-600 text-white shadow-lg shadow-emerald-500/30":"text-gray-600 hover:bg-gray-100"),children:[r,(0,s.jsx)("span",{className:"font-medium",children:a})]})}},2901:function(e,t,r){"use strict";r.r(t),r.d(t,{CartProvider:function(){return CartProvider},useCart:function(){return useCart}});var s=r(7437),a=r(2265);let l=(0,a.createContext)(void 0);function CartProvider(e){let{children:t}=e,[r,i]=(0,a.useState)([]),[n,o]=(0,a.useState)(!1),[c,d]=(0,a.useState)(!1);(0,a.useEffect)(()=>{let e=localStorage.getItem("Furato_cart");if(e)try{i(JSON.parse(e))}catch(e){console.error("Failed to parse cart",e),localStorage.removeItem("Furato_cart")}d(!0)},[]),(0,a.useEffect)(()=>{c&&localStorage.setItem("Furato_cart",JSON.stringify(r))},[r,c]);let openCart=()=>o(!0),x=r.reduce((e,t)=>e+("rental"===t.orderType?t.product.priceRental||t.product.pricePurchase||0:t.product.pricePurchase||0)*t.quantity,0),h=r.reduce((e,t)=>e+t.quantity,0);return(0,s.jsx)(l.Provider,{value:{cartItems:r,isCartOpen:n,openCart,closeCart:()=>o(!1),toggleCart:()=>o(e=>!e),addToCart:function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1,r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"purchase";i(s=>{let a=s.findIndex(t=>t.product._id===e._id&&t.orderType===r),l=[...s];if(a>-1){let e=l[a];l[a]={...e,quantity:e.quantity+t}}else l.push({product:e,quantity:t,orderType:r});return l}),openCart()},removeFromCart:(e,t)=>{i(r=>r.filter(r=>!(r.product._id===e&&r.orderType===t)))},updateQuantity:(e,t,r)=>{r<1||i(s=>s.map(s=>s.product._id===e&&s.orderType===t?{...s,quantity:r}:s))},clearCart:()=>{i([]),localStorage.removeItem("Furato_cart")},cartTotal:x,cartCount:h},children:t})}function useCart(){let e=(0,a.useContext)(l);if(void 0===e)throw Error("useCart must be used within a CartProvider");return e}},6081:function(e,t,r){"use strict";r.d(t,{Hg:function(){return optimizeImage},p7:function(){return getBlurPlaceholder}});var s=r(4829);let a="https://ecommerce-backend.onrender.com",l=s.Z.create({baseURL:a,headers:{"Content-Type":"application/json"}}),optimizeImage=function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:800;if(!e)return"/placeholder.png";if(e.startsWith("/uploads"))return"".concat(a).concat(e);if(e.includes("res.cloudinary.com"))return e.replace("/upload/","/upload/f_auto,q_auto:eco,w_".concat(t,",c_scale/"));if(e.includes("images.unsplash.com")){let r=e.split("?")[0];return"".concat(r,"?auto=format,compress&q=20&w=").concat(t)}return e.includes("picsum.photos")?"".concat(e,"?blur=2"):e},getBlurPlaceholder=()=>"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAADUlEQVR42mP8/5+hHgAHggJ/PchI7wAAAABJRU5ErkJggg==";l.interceptors.request.use(e=>{{let t=localStorage.getItem("token");t&&(e.headers.Authorization="Bearer ".concat(t))}return e},e=>Promise.reject(e)),t.ZP=l},3447:function(e,t,r){"use strict";r.r(t),r.d(t,{AuthProvider:function(){return AuthProvider},useAuth:function(){return useAuth}});var s=r(7437),a=r(2265),l=r(6081),i=r(4033);let n=(0,a.createContext)(void 0);function AuthProvider(e){let{children:t}=e,[r,o]=(0,a.useState)(null),[c,d]=(0,a.useState)(!0),x=(0,i.useRouter)();(0,a.useEffect)(()=>{let checkAuth=async()=>{let e=localStorage.getItem("token");if(e)try{let e=await l.ZP.get("/users/profile");o(e.data)}catch(e){console.error("Session expired or invalid token"),localStorage.removeItem("token"),o(null)}d(!1)};checkAuth()},[]);let register=async e=>{let t=await l.ZP.post("/auth/register",e);t.data.token&&(localStorage.setItem("token",t.data.token),o(t.data.user),x.push("/"))};return(0,s.jsx)(n.Provider,{value:{user:r,loading:c,login:(e,t)=>{localStorage.setItem("token",e),o(t),x.push("/")},logout:()=>{localStorage.removeItem("token"),o(null),x.push("/login")},register,updateUser:e=>{r&&o({...r,...e})}},children:t})}function useAuth(){let e=(0,a.useContext)(n);if(void 0===e)throw Error("useAuth must be used within an AuthProvider");return e}},2853:function(){}},function(e){e.O(0,[4737,1396,7282,6691,6842,2971,2472,1744],function(){return e(e.s=4946)}),_N_E=e.O()}]);